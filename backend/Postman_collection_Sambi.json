{
  "info": {
    "name": "Sambi API - Minimal Collection",
    "_postman_id": "sambi-collection-001",
    "description": "Collection for testing Sambi backend endpoints (auth, user, projects, payment). Use {{baseUrl}} and set {{token}} after login.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:3000/api" },
    { "key": "token", "value": "" },
    { "key": "userId", "value": "1" },
    { "key": "projectId", "value": "1" },
    { "key": "proposalId", "value": "1" }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"mahasiswa\",\n  \"fullName\": \"Budi Santoso\",\n  \"jenis_kelamin\": \"L\",\n  \"email\": \"241234567890@student.unsika.ac.id\",\n  \"password\": \"Password123!\"\n}"
            },
            "url": { "raw": "{{baseUrl}}/auth/register", "host": ["{{baseUrl}}"], "path": ["auth","register"] }
          }
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": { "mode": "raw", "raw": "{\n  \"email\": \"241234567890@student.unsika.ac.id\",\n  \"password\": \"Password123!\"\n}" },
            "url": { "raw": "{{baseUrl}}/auth/login", "host": ["{{baseUrl}}"], "path": ["auth","login"] }
          }
        },
        {
          "name": "Me (requires token)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "url": { "raw": "{{baseUrl}}/auth/me", "host": ["{{baseUrl}}"], "path": ["auth","me"] }
          }
        }
      ]
    },
    {
      "name": "User",
      "item": [
        {
          "name": "Get Profile (public)",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/user/{{userId}}", "host": ["{{baseUrl}}"], "path": ["user","{{userId}}"] } }
        },
        {
          "name": "Update Profile (auth)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"nama\": \"Budi Baru\",\n  \"jenis_kelamin\": \"L\",\n  \"bio\": \"Saya mahasiswa\"\n}" },
            "url": { "raw": "{{baseUrl}}/user/{{userId}}", "host": ["{{baseUrl}}"], "path": ["user","{{userId}}"] }
          }
        },
        {
          "name": "Upload Avatar (auth, file)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "body": { "mode": "formdata", "formdata": [ { "key": "avatar", "type": "file" } ] },
            "url": { "raw": "{{baseUrl}}/user/{{userId}}/avatar", "host": ["{{baseUrl}}"], "path": ["user","{{userId}}","avatar"] }
          }
        }
      ]
    },
    {
      "name": "Projects",
      "item": [
        {
          "name": "List Projects",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/projects", "host": ["{{baseUrl}}"], "path": ["projects"] } }
        },
        {
          "name": "Get Project",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/projects/{{projectId}}", "host": ["{{baseUrl}}"], "path": ["projects","{{projectId}}"] } }
        },
        {
          "name": "Create Project (auth)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{token}}" }],
            "body": { "mode": "raw", "raw": "{\n  \"title\": \"Design Logo\",\n  \"description\": \"Need logo for startup\",\n  \"category\": \"design\",\n  \"budget_min\": 100000,\n  \"budget_max\": 300000\n}" },
            "url": { "raw": "{{baseUrl}}/projects", "host": ["{{baseUrl}}"], "path": ["projects"] }
          }
        },
        {
          "name": "Apply to Project (auth)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{token}}" }],
            "body": { "mode": "raw", "raw": "{\n  \"proposal\": \"I can do this in 3 days for 250k\"\n}" },
            "url": { "raw": "{{baseUrl}}/projects/{{projectId}}/apply", "host": ["{{baseUrl}}"], "path": ["projects","{{projectId}}","apply"] }
          }
        },
        {
          "name": "Get Proposals (auth)",
          "request": { "method": "GET", "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }], "url": { "raw": "{{baseUrl}}/projects/{{projectId}}/proposals", "host": ["{{baseUrl}}"], "path": ["projects","{{projectId}}","proposals"] } }
        },
        {
          "name": "Accept Proposal (auth)",
          "request": { "method": "POST", "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }], "url": { "raw": "{{baseUrl}}/projects/{{projectId}}/proposals/{{proposalId}}/accept", "host": ["{{baseUrl}}"], "path": ["projects","{{projectId}}","proposals","{{proposalId}}","accept"] } }
        }
      ]
    },
    {
      "name": "Payment",
      "item": [
        {
          "name": "Create Intent (Tripay-sim)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{token}}" }],
            "body": { "mode": "raw", "raw": "{\n  \"amount\": 100000,\n  \"projectId\": {{projectId}}\n}" },
            "url": { "raw": "{{baseUrl}}/payment/intent", "host": ["{{baseUrl}}"], "path": ["payment","intent"] }
          }
        },
        {
          "name": "Tripay Callback (webhook)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": { "mode": "raw", "raw": "{\n  \"reference\": \"DEV-1234567890\",\n  \"status\": \"PAID\"\n}" },
            "url": { "raw": "{{baseUrl}}/payment/tripay/callback", "host": ["{{baseUrl}}"], "path": ["payment","tripay","callback"] }
          }
        }
      ]
    }
  ]
}
